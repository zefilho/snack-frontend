(()=>{var e={};e.id=486,e.ids=[486],e.modules={379:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var t=a(687),r=a(3210),n=a(9523),i=a(4493),l=a(2692),o=a(5950),d=a(3503),c=a(9667),m=a(13),p=a(747),x=a(5265),h=a(9867);function u(){let[e,s]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),{addTab:l}=(0,p.u)(),{toast:o}=(0,h.dj)();return(0,t.jsxs)(d.lG,{open:a,onOpenChange:i,children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(n.$,{children:[(0,t.jsx)(x.A,{className:"mr-2 h-4 w-4"}),"Nova Aba"]})}),(0,t.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Criar Nova Aba"}),(0,t.jsx)(d.rr,{children:"Insira um nome para a nova aba (ex: Mesa 5, Cliente Ana)."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(m.J,{htmlFor:"tab-name",className:"text-right",children:"Nome"}),(0,t.jsx)(c.p,{id:"tab-name",value:e,onChange:e=>s(e.target.value),className:"col-span-3",placeholder:"Nome da Aba"})]})}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>i(!1),children:"Cancelar"}),(0,t.jsx)(n.$,{type:"submit",onClick:()=>{if(""===e.trim()){o({title:"Erro",description:"O nome da aba n\xe3o pode estar vazio.",variant:"destructive"});return}l(e.trim()),o({title:"Sucesso",description:`Aba "${e.trim()}" criada.`}),s(""),i(!1)},children:"Criar Aba"})]})]})]})}var j=a(5079),b=a(6748);function g({tab:e,isOpen:s,onOpenChange:a}){let[i,l]=(0,r.useState)(void 0),[o,x]=(0,r.useState)(1),{addItemToTab:u}=(0,p.u)(),{menuItems:g}=(0,b.b)(),{toast:f}=(0,h.dj)();return(0,t.jsx)(d.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsxs)(d.L3,{children:["Adicionar Item \xe0 Aba: ",e.name]}),(0,t.jsx)(d.rr,{children:"Selecione um item e a quantidade para adicionar \xe0 aba."})]}),(0,t.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(m.J,{htmlFor:"menu-item",className:"text-right",children:"Item"}),(0,t.jsxs)(j.l6,{value:i,onValueChange:l,children:[(0,t.jsx)(j.bq,{className:"col-span-3",children:(0,t.jsx)(j.yv,{placeholder:"Selecione um item"})}),(0,t.jsx)(j.gC,{children:g.map(e=>(0,t.jsxs)(j.eb,{value:e.id,children:[e.name," - ",e.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]},e.id))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(m.J,{htmlFor:"quantity",className:"text-right",children:"Quantidade"}),(0,t.jsx)(c.p,{id:"quantity",type:"number",value:o,onChange:e=>x(parseInt(e.target.value,10)||1),className:"col-span-3",min:"1"})]})]}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(n.$,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,t.jsx)(n.$,{type:"submit",onClick:()=>{if(!i||o<=0){f({title:"Erro",description:"Selecione um item e insira uma quantidade v\xe1lida.",variant:"destructive"});return}let s=g.find(e=>e.id===i);s&&(u(e.id,s,o),f({title:"Item Adicionado",description:`${o}x ${s.name} adicionado(s) \xe0 aba "${e.name}".`}),l(void 0),x(1),a(!1))},children:"Adicionar Item"})]})]})})}var f=a(4052),v=a(6558),y=a(5925);function N(){let{tabs:e,closeTab:s}=(0,p.u)(),[a,d]=(0,r.useState)(null),{toast:c}=(0,h.dj)(),m=e.filter(e=>"open"===e.status),x=e.filter(e=>"open"!==e.status),j=e=>{s(e,"Dinheiro"),c({title:"Aba Fechada",description:`Aba #${e.substring(0,6)} foi fechada e o pagamento registrado.`})};return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Gest\xe3o de Abas"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Crie, gerencie e feche as abas dos clientes."})]}),(0,t.jsx)(u,{})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-3",children:["Abas Abertas (",m.length,")"]}),0===m.length?(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma aba aberta no momento."}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(e=>(0,t.jsxs)(i.Zp,{className:"flex flex-col",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[e.name,(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"open"===e.status?"bg-green-100 text-green-700":"paid"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"open"===e.status?"Aberta":"paid"===e.status?"Paga":"Fechada"})]}),(0,t.jsxs)(i.BT,{children:["Criada em: ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]}),(0,t.jsxs)(i.Wu,{className:"flex-grow",children:[(0,t.jsx)(l.F,{className:"h-32",children:0===e.items.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nenhum item adicionado."}):(0,t.jsx)("ul",{className:"space-y-1 text-sm",children:e.items.map((e,s)=>(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:[e.quantity,"x ",e.menuItem.name]}),(0,t.jsx)("span",{children:e.totalPrice.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},s))})}),(0,t.jsx)(o.w,{className:"my-2"}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsx)("span",{children:e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]}),(0,t.jsxs)(i.wL,{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>d(e),children:[(0,t.jsx)(f.A,{className:"mr-2 h-4 w-4"})," Adicionar Item"]}),(0,t.jsxs)(y.Lt,{children:[(0,t.jsx)(y.tv,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"destructive",size:"sm",disabled:0===e.items.length,children:[(0,t.jsx)(v.A,{className:"mr-2 h-4 w-4"})," Fechar Conta"]})}),(0,t.jsxs)(y.EO,{children:[(0,t.jsxs)(y.wd,{children:[(0,t.jsx)(y.r7,{children:"Confirmar Fechamento da Aba?"}),(0,t.jsxs)(y.$v,{children:["Aba: ",e.name," ",(0,t.jsx)("br",{}),"Total: ",e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})," ",(0,t.jsx)("br",{}),"Esta a\xe7\xe3o ir\xe1 registrar a venda e marcar a aba como paga. Deseja continuar?"]})]}),(0,t.jsxs)(y.ck,{children:[(0,t.jsx)(y.Zr,{children:"Cancelar"}),(0,t.jsx)(y.Rx,{onClick:()=>j(e.id),children:"Confirmar Pagamento"})]})]})]})]})]},e.id))})]}),a&&(0,t.jsx)(g,{tab:a,isOpen:!!a,onOpenChange:e=>{e||d(null)}}),x.length>0&&(0,t.jsxs)("section",{className:"mt-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-3",children:["Abas Fechadas/Pagas (",x.length,")"]}),(0,t.jsx)(l.F,{className:"h-64",children:(0,t.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,t.jsx)(i.Zp,{className:"opacity-70",children:(0,t.jsxs)(i.aR,{className:"pb-2",children:[(0,t.jsxs)(i.ZB,{className:"text-base flex items-center justify-between",children:[e.name,(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"paid"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"paid"===e.status?"Paga":"Fechada"})]}),(0,t.jsxs)(i.BT,{className:"text-xs",children:["Fechada em: ",new Date(e.createdAt).toLocaleDateString("pt-BR")," - Total: ",e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})},e.id))})})]})]})}},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1821:(e,s,a)=>{Promise.resolve().then(a.bind(a,379))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4205:(e,s,a)=>{Promise.resolve().then(a.bind(a,6118))},6118:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/tabs/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/tabs/page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9966:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var t=a(5239),r=a(8088),n=a(8170),i=a.n(n),l=a(893),o={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);a.d(s,o);let d={children:["",{children:["dashboard",{children:["tabs",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6118)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/tabs/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3144)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/tabs/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/tabs/page",pathname:"/dashboard/tabs",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[447,198,934,441,123,586,211,569,683],()=>a(9966));module.exports=t})();