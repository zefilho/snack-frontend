(()=>{var e={};e.id=980,e.ids=[980],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1633:(e,s,a)=>{Promise.resolve().then(a.bind(a,8846))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4785:(e,s,a)=>{Promise.resolve().then(a.bind(a,5333))},5333:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>C});var t=a(687),r=a(3210),n=a(9523),i=a(4493),o=a(2692),l=a(5950),d=a(3503),c=a(13),m=a(5079),x=a(1423),h=a(944),p=a(5265),u=a(9867);function j(){let[e,s]=(0,r.useState)(),[a,i]=(0,r.useState)(!1),{addAnnotation:o}=(0,x.w)(),{customers:l}=(0,h.d)(),{toast:j}=(0,u.dj)();return(0,t.jsxs)(d.lG,{open:a,onOpenChange:i,children:[(0,t.jsx)(d.zM,{asChild:!0,children:(0,t.jsxs)(n.$,{children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"}),"Nova Anota\xe7\xe3o"]})}),(0,t.jsxs)(d.Cf,{className:"sm:max-w-[425px]",children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsx)(d.L3,{children:"Criar Nova Anota\xe7\xe3o"}),(0,t.jsx)(d.rr,{children:"Selecione um cliente para iniciar uma nova anota\xe7\xe3o."})]}),(0,t.jsx)("div",{className:"grid gap-4 py-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-4 items-center gap-4",children:[(0,t.jsx)(c.J,{htmlFor:"customer-select",className:"text-right",children:"Cliente"}),(0,t.jsxs)(m.l6,{value:e,onValueChange:s,children:[(0,t.jsx)(m.bq,{id:"customer-select",className:"col-span-3",children:(0,t.jsx)(m.yv,{placeholder:"Selecione um cliente"})}),(0,t.jsx)(m.gC,{children:l.map(e=>(0,t.jsx)(m.eb,{value:e.id,children:e.name},e.id))})]})]})}),(0,t.jsxs)(d.Es,{children:[(0,t.jsx)(d.HM,{asChild:!0,children:(0,t.jsx)(n.$,{type:"button",variant:"outline",children:"Cancelar"})}),(0,t.jsx)(n.$,{type:"submit",onClick:()=>{let a=l.find(s=>s.id===e);if(!a){j({title:"Erro",description:"Por favor, selecione um cliente.",variant:"destructive"});return}o({id:a.id,name:a.name}),j({title:"Sucesso",description:`Anota\xe7\xe3o para "${a.name}" criada.`}),s(void 0),i(!1)},children:"Criar Anota\xe7\xe3o"})]})]})]})}var g=a(9667),f=a(6748),b=a(4780);function v({annotation:e,isOpen:s,onOpenChange:a}){let[l,m]=(0,r.useState)(null),[h,j]=(0,r.useState)(1),{addItemToAnnotation:v}=(0,x.w)(),{menuItems:y}=(0,f.b)(),{toast:N}=(0,u.dj)(),w=(0,r.useMemo)(()=>y.reduce((e,s)=>((e[s.category]=e[s.category]||[]).push(s),e),{}),[y]);return(0,t.jsx)(d.lG,{open:s,onOpenChange:a,children:(0,t.jsxs)(d.Cf,{className:"sm:max-w-md md:max-w-lg lg:max-w-2xl",children:[(0,t.jsxs)(d.c7,{children:[(0,t.jsxs)(d.L3,{children:["Adicionar Item \xe0 Anota\xe7\xe3o: ",e.name]}),(0,t.jsx)(d.rr,{children:"Clique em um item, defina a quantidade e adicione \xe0 anota\xe7\xe3o."})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 my-4 items-end",children:[(0,t.jsxs)("div",{className:"flex-grow sm:flex-grow-0",children:[(0,t.jsx)(c.J,{htmlFor:`quantity-dialog-${e.id}`,children:"Quantidade"}),(0,t.jsx)(g.p,{id:`quantity-dialog-${e.id}`,type:"number",value:h,onChange:e=>j(parseInt(e.target.value,10)||1),min:"1",className:"w-full sm:w-24"})]}),(0,t.jsxs)(n.$,{onClick:()=>{if(!l||h<=0){N({title:"Erro",description:"Selecione um item e uma quantidade v\xe1lida.",variant:"destructive"});return}v(e.id,l,h),N({title:"Item Adicionado",description:`${h}x ${l.name} adicionado(s) \xe0 anota\xe7\xe3o "${e.name}".`}),m(null),j(1)},disabled:!l||h<=0,className:"w-full sm:w-auto",children:[(0,t.jsx)(p.A,{className:"mr-2 h-4 w-4"})," Adicionar Selecionado"]})]}),(0,t.jsx)(o.F,{className:"h-[350px] border rounded-md p-3",children:Object.entries(w).map(([e,s])=>(0,t.jsxs)("div",{className:"mb-4 last:mb-0",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2 sticky top-0 bg-background py-1 -mx-3 px-3 border-b",children:e}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-2",children:s.map(e=>(0,t.jsx)(i.Zp,{onClick:()=>m(e),className:(0,b.cn)("cursor-pointer hover:shadow-md transition-all duration-150 ease-in-out flex flex-col text-sm",l?.id===e.id&&"ring-2 ring-primary shadow-lg"),role:"button",tabIndex:0,onKeyDown:s=>{("Enter"===s.key||" "===s.key)&&m(e)},"aria-pressed":l?.id===e.id,"aria-label":`Selecionar ${e.name}`,children:(0,t.jsxs)(i.Wu,{className:"p-2 flex-grow flex flex-col justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium leading-tight",children:e.name}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:e.price.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]}),l?.id===e.id&&(0,t.jsx)("span",{className:"text-xs text-primary font-semibold mt-1 self-start",children:"Selecionado"})]})},e.id))})]},e))}),(0,t.jsx)(d.Es,{className:"mt-4",children:(0,t.jsx)(d.HM,{asChild:!0,children:(0,t.jsx)(n.$,{type:"button",variant:"outline",children:"Fechar"})})})]})})}var y=a(4052),N=a(6558),w=a(5925);function C(){let{annotations:e,closeAnnotation:s}=(0,x.w)(),[a,d]=(0,r.useState)(null),{toast:c}=(0,u.dj)(),m=e.filter(e=>"open"===e.status),h=e.filter(e=>"open"!==e.status),p=e=>{s(e,"Dinheiro"),c({title:"Anota\xe7\xe3o Fechada",description:`Anota\xe7\xe3o #${e.substring(0,6)} foi fechada e o pagamento registrado.`})};return(0,t.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,t.jsxs)("header",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Anota\xe7\xf5es de Pedidos"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Crie, gerencie e feche as anota\xe7\xf5es dos clientes."})]}),(0,t.jsx)(j,{})]}),(0,t.jsxs)("section",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-3",children:["Anota\xe7\xf5es Abertas (",m.length,")"]}),0===m.length?(0,t.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma anota\xe7\xe3o aberta no momento."}):(0,t.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:m.map(e=>(0,t.jsxs)(i.Zp,{className:"flex flex-col",children:[(0,t.jsxs)(i.aR,{children:[(0,t.jsxs)(i.ZB,{className:"flex items-center justify-between",children:[e.customerName,(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"open"===e.status?"bg-green-100 text-green-700":"paid"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"open"===e.status?"Aberta":"paid"===e.status?"Paga":"Fechada"})]}),(0,t.jsxs)(i.BT,{children:["Criada em: ",new Date(e.createdAt).toLocaleDateString("pt-BR")]})]}),(0,t.jsxs)(i.Wu,{className:"flex-grow",children:[(0,t.jsx)(o.F,{className:"h-32",children:0===e.items.length?(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Nenhum item adicionado."}):(0,t.jsx)("ul",{className:"space-y-1 text-sm",children:e.items.map((e,s)=>(0,t.jsxs)("li",{className:"flex justify-between",children:[(0,t.jsxs)("span",{children:[e.quantity,"x ",e.menuItem.name]}),(0,t.jsx)("span",{children:e.totalPrice.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},s))})}),(0,t.jsx)(l.w,{className:"my-2"}),(0,t.jsxs)("div",{className:"flex justify-between font-semibold",children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsx)("span",{children:e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]})]}),(0,t.jsxs)(i.wL,{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)(n.$,{variant:"outline",size:"sm",onClick:()=>d(e),children:[(0,t.jsx)(y.A,{className:"mr-2 h-4 w-4"})," Adicionar Item"]}),(0,t.jsxs)(w.Lt,{children:[(0,t.jsx)(w.tv,{asChild:!0,children:(0,t.jsxs)(n.$,{variant:"destructive",size:"sm",disabled:0===e.items.length,children:[(0,t.jsx)(N.A,{className:"mr-2 h-4 w-4"})," Fechar Conta"]})}),(0,t.jsxs)(w.EO,{children:[(0,t.jsxs)(w.wd,{children:[(0,t.jsx)(w.r7,{children:"Confirmar Fechamento da Anota\xe7\xe3o?"}),(0,t.jsxs)(w.$v,{children:["Anota\xe7\xe3o para: ",e.customerName," ",(0,t.jsx)("br",{}),"Total: ",e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})," ",(0,t.jsx)("br",{}),"Esta a\xe7\xe3o ir\xe1 registrar a venda e marcar a anota\xe7\xe3o como paga. Deseja continuar?"]})]}),(0,t.jsxs)(w.ck,{children:[(0,t.jsx)(w.Zr,{children:"Cancelar"}),(0,t.jsx)(w.Rx,{onClick:()=>p(e.id),children:"Confirmar Pagamento"})]})]})]})]})]},e.id))})]}),a&&(0,t.jsx)(v,{annotation:a,isOpen:!!a,onOpenChange:e=>{e||d(null)}}),h.length>0&&(0,t.jsxs)("section",{className:"mt-8",children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold mb-3",children:["Anota\xe7\xf5es Fechadas/Pagas (",h.length,")"]}),(0,t.jsx)(o.F,{className:"h-64",children:(0,t.jsx)("div",{className:"space-y-3",children:h.map(e=>(0,t.jsx)(i.Zp,{className:"opacity-70",children:(0,t.jsxs)(i.aR,{className:"pb-2",children:[(0,t.jsxs)(i.ZB,{className:"text-base flex items-center justify-between",children:[e.customerName,(0,t.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${"paid"===e.status?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:"paid"===e.status?"Paga":"Fechada"})]}),(0,t.jsxs)(i.BT,{className:"text-xs",children:["Fechada em: ",new Date(e.closedAt||e.createdAt).toLocaleDateString("pt-BR")," - Total: ",e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})]})]})},e.id))})})]})]})}},8056:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=a(5239),r=a(8088),n=a(8170),i=a.n(n),o=a(893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(s,l);let d={children:["",{children:["dashboard",{children:["annotations",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8846)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/annotations/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3144)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,4431)),"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/annotations/page.tsx"],m={require:a,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/dashboard/annotations/page",pathname:"/dashboard/annotations",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8846:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>t});let t=(0,a(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/annotations/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/jose-lopes/pessoais/02-areas/resgatame/frontend/src/app/dashboard/annotations/page.tsx","default")},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var s=require("../../../webpack-runtime.js");s.C(e);var a=e=>s(s.s=e),t=s.X(0,[447,198,934,441,123,586,211,569,683],()=>a(8056));module.exports=t})();