(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{31:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var r=a(5155),n=a(6695);function s(e){let{title:t,value:a,icon:s,description:o}=e;return(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,r.jsx)(n.ZB,{className:"text-sm font-medium",children:t}),(0,r.jsx)(s,{className:"h-5 w-5 text-muted-foreground"})]}),(0,r.jsxs)(n.Wu,{children:[(0,r.jsx)("div",{className:"text-2xl font-bold font-headline",children:"number"==typeof a?a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):a}),o&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground pt-1",children:o})]})]})}var o=a(477),i=a(8390),d=a(157);let c=(0,d.A)("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),l=(0,d.A)("ChartColumnBig",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["rect",{x:"15",y:"5",width:"4",height:"12",rx:"1",key:"q8uenq"}],["rect",{x:"7",y:"8",width:"4",height:"9",rx:"1",key:"sr5ea"}]]);function m(){let{dailyRevenue:e,totalOrdersToday:t,averageOrderValueToday:a,transactions:d}=(0,o.U)();return(0,r.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,r.jsxs)("header",{children:[(0,r.jsx)("h1",{className:"text-3xl font-headline font-semibold",children:"Vis\xe3o Geral"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Acompanhe as m\xe9tricas chave do seu Snack Bar."})]}),(0,r.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[(0,r.jsx)(s,{title:"Receita Di\xe1ria",value:e,icon:i.A,description:"Total de vendas realizadas hoje."}),(0,r.jsx)(s,{title:"Total de Pedidos Hoje",value:t,icon:c,description:"N\xfamero de pedidos processados hoje."}),(0,r.jsx)(s,{title:"Valor M\xe9dio por Pedido",value:a,icon:l,description:"Valor m\xe9dio de cada pedido de hoje."})]}),(0,r.jsxs)(n.Zp,{children:[(0,r.jsxs)(n.aR,{children:[(0,r.jsx)(n.ZB,{children:"Atividade Recente"}),(0,r.jsx)(n.BT,{children:"\xdaltimas transa\xe7\xf5es registradas."})]}),(0,r.jsx)(n.Wu,{children:0===d.length?(0,r.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma transa\xe7\xe3o recente."}):(0,r.jsx)("ul",{className:"space-y-2",children:d.slice(0,5).map(e=>(0,r.jsxs)("li",{className:"flex justify-between items-center p-2 border-b last:border-b-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"font-medium",children:["Pedido #",e.id.substring(0,8)]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[new Date(e.timestamp).toLocaleTimeString("pt-BR")," - ",e.items.length," item(s)"]})]}),(0,r.jsx)("p",{className:"font-semibold",children:e.totalAmount.toLocaleString("pt-BR",{style:"currency",currency:"BRL"})})]},e.id))})})]})]})}},157:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(2115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:d,className:c="",children:l,iconNode:m,...u}=e;return(0,r.createElement)("svg",{ref:t,...o,width:n,height:n,stroke:a,strokeWidth:d?24*Number(i)/Number(n):i,className:s("lucide",c),...u},[...m.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(l)?l:[l]])}),d=(e,t)=>{let a=(0,r.forwardRef)((a,o)=>{let{className:d,...c}=a;return(0,r.createElement)(i,{ref:o,iconNode:t,className:s("lucide-".concat(n(e)),d),...c})});return a.displayName="".concat(e),a}},477:(e,t,a)=>{"use strict";a.d(t,{U:()=>d,s:()=>i});var r=a(5155),n=a(722),s=a(2115);let o=(0,s.createContext)(void 0),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)([]),[d,c]=(0,s.useState)({dailyRevenue:0,totalOrdersToday:0,averageOrderValueToday:0}),[l,m]=(0,s.useState)(!0),[u,h]=(0,s.useState)(null),y=(0,s.useCallback)(async()=>{try{m(!0),h(null);let e=(await n.sn.getAll({limit:100})).map(e=>{var t;return{id:e.id,timestamp:new Date(e.timestamp),items:(null===(t=e.items)||void 0===t?void 0:t.map(e=>({menuItem:{id:e.menu_item.id,name:e.menu_item.name,price:e.unit_price,category:e.menu_item.category},quantity:e.quantity,get totalPrice(){return this.menuItem.price*this.quantity}})))||[],totalAmount:e.total_amount,annotationId:e.annotation_id,paymentMethod:e.payment_method}});i(e)}catch(e){h(e instanceof Error?e.message:"Erro ao carregar transa\xe7\xf5es"),console.error("Erro ao carregar transa\xe7\xf5es:",e)}finally{m(!1)}},[]),p=(0,s.useCallback)(async()=>{try{let e=await n.sn.getDailyStats();c({dailyRevenue:e.total_revenue,totalOrdersToday:e.total_orders,averageOrderValueToday:e.average_order_value})}catch(e){console.error("Erro ao carregar estat\xedsticas di\xe1rias:",e)}},[]),f=(0,s.useCallback)(async e=>{try{h(null);let t={items:e.items.map(e=>({menu_item_id:e.menuItem.id,quantity:e.quantity,unit_price:e.menuItem.price})),total_amount:e.totalAmount,payment_method:e.paymentMethod,annotation_id:e.annotationId},a=await n.sn.create(t),r={id:a.id,timestamp:new Date(a.timestamp),items:e.items,totalAmount:e.totalAmount,annotationId:e.annotationId,paymentMethod:e.paymentMethod};i(e=>[r,...e]),await p()}catch(e){throw h(e instanceof Error?e.message:"Erro ao criar transa\xe7\xe3o"),e}},[p]);return(0,s.useEffect)(()=>{Promise.all([y(),p()])},[y,p]),(0,r.jsx)(o.Provider,{value:{transactions:a,addTransaction:f,dailyRevenue:d.dailyRevenue,totalOrdersToday:d.totalOrdersToday,averageOrderValueToday:d.averageOrderValueToday,loading:l,error:u,refreshTransactions:y,refreshDailyStats:p},children:t})},d=()=>{let e=(0,s.useContext)(o);if(!e)throw Error("useSales must be used within a SalesProvider");return e}},722:(e,t,a)=>{"use strict";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("https://ogh5izce7v7v.manus.space/api").concat(e),r={headers:{"Content-Type":"application/json",...t.headers},...t};try{let e=await fetch(a,r);if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.error||"HTTP error! status: ".concat(e.status))}return await e.json()}catch(t){throw console.error("API request failed for ".concat(e,":"),t),t}}a.d(t,{Y_:()=>s,mJ:()=>n,r:()=>o,sn:()=>i});let n={getAll:()=>r("/customers"),create:e=>r("/customers",{method:"POST",body:JSON.stringify(e)}),getById:e=>r("/customers/".concat(e)),update:(e,t)=>r("/customers/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/customers/".concat(e),{method:"DELETE"})},s={getAll:function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return r("/menu-items?active_only=".concat(e))},create:e=>r("/menu-items",{method:"POST",body:JSON.stringify(e)}),getById:e=>r("/menu-items/".concat(e)),update:(e,t)=>r("/menu-items/".concat(e),{method:"PUT",body:JSON.stringify(t)}),delete:e=>r("/menu-items/".concat(e),{method:"DELETE"}),getCategories:()=>r("/menu-items/categories")},o={getAll:e=>r("/annotations".concat(e?"?status=".concat(e):"")),create:e=>r("/annotations",{method:"POST",body:JSON.stringify(e)}),getById:e=>r("/annotations/".concat(e)),addItem:(e,t)=>r("/annotations/".concat(e,"/items"),{method:"POST",body:JSON.stringify(t)}),close:(e,t)=>r("/annotations/".concat(e,"/close"),{method:"POST",body:JSON.stringify({payment_method:t})}),delete:e=>r("/annotations/".concat(e),{method:"DELETE"})},i={getAll:e=>{let t=new URLSearchParams;e&&Object.entries(e).forEach(e=>{let[a,r]=e;void 0!==r&&t.append(a,r.toString())});let a=t.toString();return r("/transactions".concat(a?"?".concat(a):""))},create:e=>r("/transactions",{method:"POST",body:JSON.stringify(e)}),getById:e=>r("/transactions/".concat(e)),getDailyStats:()=>r("/transactions/stats/daily"),getPeriodStats:(e,t)=>r("/transactions/stats/period?start_date=".concat(e,"&end_date=").concat(t)),delete:e=>r("/transactions/".concat(e),{method:"DELETE"})}},1514:(e,t,a)=>{Promise.resolve().then(a.bind(a,31))},6695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>c,Wu:()=>l,ZB:()=>d,Zp:()=>o,aR:()=>i,wL:()=>m});var r=a(5155),n=a(2115),s=a(9434);let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});o.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});d.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",a),...n})});c.displayName="CardDescription";let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",a),...n})});l.displayName="CardContent";let m=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,r.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",a),...n})});m.displayName="CardFooter"},8390:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(157).A)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},9434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>s});var r=a(2596),n=a(9688);function s(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.QP)((0,r.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[277,441,684,358],()=>t(1514)),_N_E=e.O()}]);