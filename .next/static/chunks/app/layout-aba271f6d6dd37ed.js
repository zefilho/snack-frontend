(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{50:(t,e,a)=>{Promise.resolve().then(a.t.bind(a,347,23)),Promise.resolve().then(a.bind(a,888)),Promise.resolve().then(a.bind(a,2558))},347:()=>{},477:(t,e,a)=>{"use strict";a.d(e,{U:()=>c,s:()=>i});var r=a(5155),s=a(722),o=a(2115);let n=(0,o.createContext)(void 0),i=t=>{let{children:e}=t,[a,i]=(0,o.useState)([]),[c,d]=(0,o.useState)({dailyRevenue:0,totalOrdersToday:0,averageOrderValueToday:0}),[u,l]=(0,o.useState)(!0),[m,f]=(0,o.useState)(null),h=(0,o.useCallback)(async()=>{try{l(!0),f(null);let t=(await s.sn.getAll({limit:100})).map(t=>{var e;return{id:t.id,timestamp:new Date(t.timestamp),items:(null===(e=t.items)||void 0===e?void 0:e.map(t=>({menuItem:{id:t.menu_item.id,name:t.menu_item.name,price:t.unit_price,category:t.menu_item.category},quantity:t.quantity,get totalPrice(){return this.menuItem.price*this.quantity}})))||[],totalAmount:t.total_amount,annotationId:t.annotation_id,paymentMethod:t.payment_method}});i(t)}catch(t){f(t instanceof Error?t.message:"Erro ao carregar transa\xe7\xf5es"),console.error("Erro ao carregar transa\xe7\xf5es:",t)}finally{l(!1)}},[]),p=(0,o.useCallback)(async()=>{try{let t=await s.sn.getDailyStats();d({dailyRevenue:t.total_revenue,totalOrdersToday:t.total_orders,averageOrderValueToday:t.average_order_value})}catch(t){console.error("Erro ao carregar estat\xedsticas di\xe1rias:",t)}},[]),y=(0,o.useCallback)(async t=>{try{f(null);let e={items:t.items.map(t=>({menu_item_id:t.menuItem.id,quantity:t.quantity,unit_price:t.menuItem.price})),total_amount:t.totalAmount,payment_method:t.paymentMethod,annotation_id:t.annotationId},a=await s.sn.create(e),r={id:a.id,timestamp:new Date(a.timestamp),items:t.items,totalAmount:t.totalAmount,annotationId:t.annotationId,paymentMethod:t.paymentMethod};i(t=>[r,...t]),await p()}catch(t){throw f(t instanceof Error?t.message:"Erro ao criar transa\xe7\xe3o"),t}},[p]);return(0,o.useEffect)(()=>{Promise.all([h(),p()])},[h,p]),(0,r.jsx)(n.Provider,{value:{transactions:a,addTransaction:y,dailyRevenue:c.dailyRevenue,totalOrdersToday:c.totalOrdersToday,averageOrderValueToday:c.averageOrderValueToday,loading:u,error:m,refreshTransactions:h,refreshDailyStats:p},children:e})},c=()=>{let t=(0,o.useContext)(n);if(!t)throw Error("useSales must be used within a SalesProvider");return t}},722:(t,e,a)=>{"use strict";async function r(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat("https://ogh5izce7v7v.manus.space/api").concat(t),r={headers:{"Content-Type":"application/json",...e.headers},...e};try{let t=await fetch(a,r);if(!t.ok){let e=await t.json().catch(()=>({}));throw Error(e.error||"HTTP error! status: ".concat(t.status))}return await t.json()}catch(e){throw console.error("API request failed for ".concat(t,":"),e),e}}a.d(e,{Y_:()=>o,mJ:()=>s,r:()=>n,sn:()=>i});let s={getAll:()=>r("/customers"),create:t=>r("/customers",{method:"POST",body:JSON.stringify(t)}),getById:t=>r("/customers/".concat(t)),update:(t,e)=>r("/customers/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>r("/customers/".concat(t),{method:"DELETE"})},o={getAll:function(){let t=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return r("/menu-items?active_only=".concat(t))},create:t=>r("/menu-items",{method:"POST",body:JSON.stringify(t)}),getById:t=>r("/menu-items/".concat(t)),update:(t,e)=>r("/menu-items/".concat(t),{method:"PUT",body:JSON.stringify(e)}),delete:t=>r("/menu-items/".concat(t),{method:"DELETE"}),getCategories:()=>r("/menu-items/categories")},n={getAll:t=>r("/annotations".concat(t?"?status=".concat(t):"")),create:t=>r("/annotations",{method:"POST",body:JSON.stringify(t)}),getById:t=>r("/annotations/".concat(t)),addItem:(t,e)=>r("/annotations/".concat(t,"/items"),{method:"POST",body:JSON.stringify(e)}),close:(t,e)=>r("/annotations/".concat(t,"/close"),{method:"POST",body:JSON.stringify({payment_method:e})}),delete:t=>r("/annotations/".concat(t),{method:"DELETE"})},i={getAll:t=>{let e=new URLSearchParams;t&&Object.entries(t).forEach(t=>{let[a,r]=t;void 0!==r&&e.append(a,r.toString())});let a=e.toString();return r("/transactions".concat(a?"?".concat(a):""))},create:t=>r("/transactions",{method:"POST",body:JSON.stringify(t)}),getById:t=>r("/transactions/".concat(t)),getDailyStats:()=>r("/transactions/stats/daily"),getPeriodStats:(t,e)=>r("/transactions/stats/period?start_date=".concat(t,"&end_date=").concat(e)),delete:t=>r("/transactions/".concat(t),{method:"DELETE"})}},888:(t,e,a)=>{"use strict";a.d(e,{AppProviders:()=>d});var r=a(5155),s=a(1978),o=a(477),n=a(1835),i=a(5212),c=a(3933);a(2115);let d=t=>{let{children:e}=t;return(0,r.jsx)(i.p,{children:(0,r.jsx)(s.B,{children:(0,r.jsx)(o.s,{children:(0,r.jsx)(n.S,{children:(0,r.jsx)(c.O,{children:e})})})})})}},1835:(t,e,a)=>{"use strict";a.d(e,{S:()=>d,w:()=>u});var r=a(5155),s=a(3717),o=a(722),n=a(2115),i=a(477);let c=(0,n.createContext)(void 0),d=t=>{let{children:e}=t,[a,d]=(0,n.useState)([]),[u,l]=(0,n.useState)(!0),[m,f]=(0,n.useState)(null),{addTransaction:h}=(0,i.U)(),p=(0,n.useCallback)(async()=>{try{l(!0),f(null);let t=(await o.r.getAll()).map(t=>{var e;let a=new s.Le(t.id,t.customer_id,t.customer_name);return a.status=t.status,a.createdAt=new Date(t.created_at),t.closed_at&&(a.closedAt=new Date(t.closed_at)),a.items=(null===(e=t.items)||void 0===e?void 0:e.map(t=>new s.LN({id:t.menu_item.id,name:t.menu_item.name,price:t.unit_price,category:t.menu_item.category},t.quantity)))||[],a});d(t)}catch(t){f(t instanceof Error?t.message:"Erro ao carregar anota\xe7\xf5es"),console.error("Erro ao carregar anota\xe7\xf5es:",t)}finally{l(!1)}},[]),y=(0,n.useCallback)(async t=>{try{f(null);let e=await o.r.create({customer_id:t.id,customer_name:t.name}),a=new s.Le(e.id,e.customer_id,e.customer_name);return a.status=e.status,a.createdAt=new Date(e.created_at),d(t=>[...t,a]),a}catch(t){throw f(t instanceof Error?t.message:"Erro ao criar anota\xe7\xe3o"),t}},[]),g=(0,n.useCallback)(async(t,e,a)=>{try{f(null);let r=await o.r.addItem(t,{menu_item_id:e.id,quantity:a});d(e=>e.map(e=>{if(e.id===t){var a;let t=new s.Le(r.id,r.customer_id,r.customer_name);return t.status=r.status,t.createdAt=new Date(r.created_at),r.closed_at&&(t.closedAt=new Date(r.closed_at)),t.items=(null===(a=r.items)||void 0===a?void 0:a.map(t=>new s.LN({id:t.menu_item.id,name:t.menu_item.name,price:t.unit_price,category:t.menu_item.category},t.quantity)))||[],t}return e}))}catch(t){throw f(t instanceof Error?t.message:"Erro ao adicionar item \xe0 anota\xe7\xe3o"),t}},[]),v=(0,n.useCallback)(async(t,e)=>{try{f(null);let r=await o.r.close(t,e);if(d(e=>e.map(e=>{if(e.id===t){let t=new s.Le(r.annotation.id,r.annotation.customer_id,r.annotation.customer_name);return t.status=r.annotation.status,t.createdAt=new Date(r.annotation.created_at),t.closedAt=new Date(r.annotation.closed_at),t.items=e.items,t}return e})),r.transaction){let r=a.find(e=>e.id===t);r&&h({items:r.items,totalAmount:r.totalAmount,annotationId:r.id,paymentMethod:e})}}catch(t){throw f(t instanceof Error?t.message:"Erro ao fechar anota\xe7\xe3o"),t}},[a,h]),w=(0,n.useCallback)(t=>a.find(e=>e.id===t),[a]);return(0,n.useEffect)(()=>{p()},[p]),(0,r.jsx)(c.Provider,{value:{annotations:a,addAnnotation:y,addItemToAnnotation:g,closeAnnotation:v,getAnnotationById:w,loading:u,error:m,refreshAnnotations:p},children:e})},u=()=>{let t=(0,n.useContext)(c);if(!t)throw Error("useAnnotations must be used within an AnnotationsProvider");return t}},1978:(t,e,a)=>{"use strict";a.d(e,{B:()=>i,b:()=>c});var r=a(5155),s=a(722),o=a(2115);let n=(0,o.createContext)(void 0),i=t=>{let{children:e}=t,[a,i]=(0,o.useState)([]),[c,d]=(0,o.useState)(!0),[u,l]=(0,o.useState)(null),m=(0,o.useCallback)(async()=>{try{d(!0),l(null);let t=await s.Y_.getAll();i(t)}catch(t){l(t instanceof Error?t.message:"Erro ao carregar itens do menu"),console.error("Erro ao carregar itens do menu:",t)}finally{d(!1)}},[]),f=(0,o.useCallback)(async t=>{try{l(null);let e=await s.Y_.create(t);i(t=>[...t,e])}catch(t){throw l(t instanceof Error?t.message:"Erro ao criar item do menu"),t}},[]),h=(0,o.useCallback)(async t=>{try{l(null),await s.Y_.delete(t),i(e=>e.filter(e=>e.id!==t))}catch(t){throw l(t instanceof Error?t.message:"Erro ao remover item do menu"),t}},[]);return(0,o.useEffect)(()=>{m()},[m]),(0,r.jsx)(n.Provider,{value:{menuItems:a,addMenuItem:f,removeMenuItem:h,loading:c,error:u,refreshMenuItems:m},children:e})},c=()=>{let t=(0,o.useContext)(n);if(!t)throw Error("useMenu must be used within a MenuProvider");return t}},2558:(t,e,a)=>{"use strict";a.d(e,{Toaster:()=>g});var r=a(5155),s=a(7481),o=a(2115),n=a(6621),i=a(2085),c=a(5318),d=a(9434);let u=n.Kq,l=o.forwardRef((t,e)=>{let{className:a,...s}=t;return(0,r.jsx)(n.LM,{ref:e,className:(0,d.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...s})});l.displayName=n.LM.displayName;let m=(0,i.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=o.forwardRef((t,e)=>{let{className:a,variant:s,...o}=t;return(0,r.jsx)(n.bL,{ref:e,className:(0,d.cn)(m({variant:s}),a),...o})});f.displayName=n.bL.displayName,o.forwardRef((t,e)=>{let{className:a,...s}=t;return(0,r.jsx)(n.rc,{ref:e,className:(0,d.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...s})}).displayName=n.rc.displayName;let h=o.forwardRef((t,e)=>{let{className:a,...s}=t;return(0,r.jsx)(n.bm,{ref:e,className:(0,d.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...s,children:(0,r.jsx)(c.A,{className:"h-4 w-4"})})});h.displayName=n.bm.displayName;let p=o.forwardRef((t,e)=>{let{className:a,...s}=t;return(0,r.jsx)(n.hE,{ref:e,className:(0,d.cn)("text-sm font-semibold",a),...s})});p.displayName=n.hE.displayName;let y=o.forwardRef((t,e)=>{let{className:a,...s}=t;return(0,r.jsx)(n.VY,{ref:e,className:(0,d.cn)("text-sm opacity-90",a),...s})});function g(){let{toasts:t}=(0,s.dj)();return(0,r.jsxs)(u,{children:[t.map(function(t){let{id:e,title:a,description:s,action:o,...n}=t;return(0,r.jsxs)(f,{...n,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[a&&(0,r.jsx)(p,{children:a}),s&&(0,r.jsx)(y,{children:s})]}),o,(0,r.jsx)(h,{})]},e)}),(0,r.jsx)(l,{})]})}y.displayName=n.VY.displayName},3717:(t,e,a)=>{"use strict";a.d(e,{LN:()=>r,Le:()=>s,bT:()=>o});class r{get totalPrice(){return this.menuItem.price*this.quantity}constructor(t,e){this.menuItem=t,this.quantity=e}}class s{get totalAmount(){return this.items.reduce((t,e)=>t+e.totalPrice,0)}constructor(t,e,a){this.id=t,this.customerId=e,this.customerName=a,this.items=[],this.status="open",this.createdAt=new Date}}class o{get totalAmount(){return this.items.reduce((t,e)=>t+e.totalPrice,0)}constructor(t,e){this.id=t,this.name=e,this.items=[],this.createdAt=new Date,this.status="open"}}},3933:(t,e,a)=>{"use strict";a.d(e,{O:()=>c,u:()=>d});var r=a(5155),s=a(3717),o=a(2115),n=a(477);let i=(0,o.createContext)(void 0),c=t=>{let{children:e}=t,[a,c]=(0,o.useState)([]),{addTransaction:d}=(0,n.U)(),u=(0,o.useCallback)(t=>{let e=new s.bT("tab-".concat(Date.now(),"-").concat(Math.random().toString(36).substring(2,7)),t);return c(t=>[...t,e]),e},[]),l=(0,o.useCallback)((t,e,a)=>{c(r=>r.map(r=>{if(r.id===t&&"open"===r.status){let t;let o=r.items.findIndex(t=>t.menuItem.id===e.id);t=o>-1?r.items.map((t,r)=>r===o?new s.LN(e,t.quantity+a):t):[...r.items,new s.LN(e,a)];let n=new s.bT(r.id,r.name);return n.items=t,n.status=r.status,n.createdAt=r.createdAt,n}return r}))},[]),m=(0,o.useCallback)((t,e)=>{let r=a.find(e=>e.id===t);r&&"open"===r.status&&(d({items:r.items,totalAmount:r.totalAmount,tabId:r.id,paymentMethod:e}),c(e=>e.map(e=>e.id===t?{...e,status:"paid"}:e)))},[a,d]),f=(0,o.useCallback)(t=>a.find(e=>e.id===t),[a]);return(0,r.jsx)(i.Provider,{value:{tabs:a,addTab:u,addItemToTab:l,closeTab:m,getTabById:f},children:e})},d=()=>{let t=(0,o.useContext)(i);if(!t)throw Error("useTabs must be used within a TabsProvider");return t}},5212:(t,e,a)=>{"use strict";a.d(e,{d:()=>c,p:()=>i});var r=a(5155),s=a(722),o=a(2115);let n=(0,o.createContext)(void 0),i=t=>{let{children:e}=t,[a,i]=(0,o.useState)([]),[c,d]=(0,o.useState)(!0),[u,l]=(0,o.useState)(null),m=(0,o.useCallback)(async()=>{try{d(!0),l(null);let t=await s.mJ.getAll();i(t)}catch(t){l(t instanceof Error?t.message:"Erro ao carregar clientes"),console.error("Erro ao carregar clientes:",t)}finally{d(!1)}},[]),f=(0,o.useCallback)(async t=>{try{l(null);let e=await s.mJ.create(t);i(t=>[...t,e])}catch(t){throw l(t instanceof Error?t.message:"Erro ao criar cliente"),t}},[]),h=(0,o.useCallback)(async t=>{try{l(null),await s.mJ.delete(t),i(e=>e.filter(e=>e.id!==t))}catch(t){throw l(t instanceof Error?t.message:"Erro ao remover cliente"),t}},[]);return(0,o.useEffect)(()=>{m()},[m]),(0,r.jsx)(n.Provider,{value:{customers:a,addCustomer:f,removeCustomer:h,loading:c,error:u,refreshCustomers:m},children:e})},c=()=>{let t=(0,o.useContext)(n);if(!t)throw Error("useCustomers must be used within a CustomersProvider");return t}},7481:(t,e,a)=>{"use strict";a.d(e,{dj:()=>m});var r=a(2115);let s=0,o=new Map,n=t=>{if(o.has(t))return;let e=setTimeout(()=>{o.delete(t),u({type:"REMOVE_TOAST",toastId:t})},1e6);o.set(t,e)},i=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:a}=e;return a?n(a):t.toasts.forEach(t=>{n(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===a||void 0===a?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},c=[],d={toasts:[]};function u(t){d=i(d,t),c.forEach(t=>{t(d)})}function l(t){let{...e}=t,a=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>u({type:"DISMISS_TOAST",toastId:a});return u({type:"ADD_TOAST",toast:{...e,id:a,open:!0,onOpenChange:t=>{t||r()}}}),{id:a,dismiss:r,update:t=>u({type:"UPDATE_TOAST",toast:{...t,id:a}})}}function m(){let[t,e]=r.useState(d);return r.useEffect(()=>(c.push(e),()=>{let t=c.indexOf(e);t>-1&&c.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>u({type:"DISMISS_TOAST",toastId:t})}}},9434:(t,e,a)=>{"use strict";a.d(e,{cn:()=>o});var r=a(2596),s=a(9688);function o(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];return(0,s.QP)((0,r.$)(e))}}},t=>{var e=e=>t(t.s=e);t.O(0,[690,277,568,234,441,684,358],()=>e(50)),_N_E=t.O()}]);